<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>BOS系统</title>
		<link href="__PUBLIC__/Home/css/base.css" rel="stylesheet" type="text/css" />
		<link href="__PUBLIC__/Home/css/common.css" rel="stylesheet" type="text/css" />
		<link href="__PUBLIC__/Home/css/page.css" rel="stylesheet" type="text/css" />
		<!--jquery-->
		<script src="__PUBLIC__/Home/module/jquery-2.1.1.min.js" type="text/javascript"></script>
		<!--ECharts-->
		<script src="__PUBLIC__/Home/module/ECharts/echarts-all.js" type="text/javascript"></script>
		<link rel="stylesheet" type="text/css" href="__PUBLIC__/Home/module/bootstrapselect/css/bootstrap.min.css"/>
	    <link rel="stylesheet" type="text/css" href="__PUBLIC__/Home/module/bootstrapselect/css/bootstrap-select.css"/>
	    <script type="text/javascript" src="__PUBLIC__/Home/module/bootstrapselect/bootstrap.min.js"></script>
	    <script type="text/javascript" src="__PUBLIC__/Home/module/bootstrapselect/bootstrap-select.js"></script>
		<script src="__PUBLIC__/Home/js/common.js" type="text/javascript"></script>
		<script type="text/javascript">
			$(function() {
				//默认展开
				//=============================统计图=============================
				 // 基于准备好的dom，初始化echarts图表
				$('.statisticsThumbnail').css('left',0);
				var myChart1 = echarts.init(document.getElementById('myChart1'));
				var option2 = {
				    title : {
				        text: '全公司流水（单位：万元）',
				    },
				    tooltip : {
				        trigger: 'axis'
				    },
				    calculable : true,
				    grid : {
				    	width : '85%'
				    },
				    legend: {
				    	orient : 'vertical',
				    	x : 'right',

                                data: ['关账成本','关账利润','关账收入','即时成本','即时利润','即时收入']
                            },
				    xAxis: [{
						type: 'category',
						boundaryGap: false,
						data: ['<php>echo implode("','",$alllinedataarr['time']);</php>']
					}],
				    yAxis : [
				        {
				            type : 'value',
				            axisLabel:{formatter:'{value}'}
				        }
				    ],
				    color : ['#FF8080','#05EBF0','#5ACD14','#FF8080','#05EBF0','#5ACD14'],
				    series : [
				        {
				            name:'关账成本',
				            type:'line',
				            data:[<php>echo implode(",",$alllinedataarr['oldout']);</php>],
				            itemStyle :{
				            	normal :{
				            		lineStyle : {
						            	type : 'dotted'
						            }
				            	}
				            },
				            
				            markPoint : {
				                data : [
				                	<php>
				                		$w=0;
										foreach($alllinedataarr['oldout'] as $v){
											if($v=='')$v=0;
											$size=(strlen($v)+1)*3;
											$oldout2[]="{value:".$v.",xAxis:".$w.",yAxis:".$v.",symbolSize:".$size."}";
											$w++;
										}
										echo implode(',',$oldout2);
				                	</php>
				                   ]
				            }
				        },
				        {
				            name:'关账利润',
				            type:'line',
				            data:[<php>echo implode(",",$alllinedataarr['oldlirun']);</php>],
				            itemStyle :{
				            	normal :{
				            		lineStyle : {
						            	type : 'dotted'
						            }
				            	}
				            },
				            markPoint : {
				                data : [
				                	<php>
				                		$w=0;
										foreach($alllinedataarr['oldlirun'] as $v){
											if($v=='')$v=0;
											$size=(strlen($v)+1)*3;
											$oldlirun2[]="{value:".$v.",xAxis:".$w.",yAxis:".$v.",symbolSize:".$size."}";
											$w++;
										}
										echo implode(',',$oldlirun2);
				                	</php>
				                   ]
				            }
				        },
				        {
				            name:'关账收入',
				            type:'line',
				            data:[<php>echo implode(",",$alllinedataarr['oldin']);</php>],
				            itemStyle :{
				            	normal :{
				            		lineStyle : {
						            	type : 'dotted'
						            }
				            	}
				            },
				            markPoint : {
				                data : [
				                	<php>
				                		$w=0;
										foreach($alllinedataarr['oldin'] as $v){
											if($v=='')$v=0;
											$size=(strlen($v)+1)*3;
											$oldin2[]="{value:".$v.",xAxis:".$w.",yAxis:".$v.",symbolSize:".$size."}";
											$w++;
										}
										echo implode(',',$oldin2);
				                	</php>
				                   ]
				            }
				        },
				        {
				            name:'即时成本',
				            type:'line',
				            data:[<php>echo implode(",",$alllinedataarr['newout']);</php>],
				            markPoint : {
				                data : [
				                	<php>
				                		$w=0;
										foreach($alllinedataarr['newout'] as $v){
											if($v=='')$v=0;
											$size=(strlen($v)+1)*3;
											$newout2[]="{value:".$v.",xAxis:".$w.",yAxis:".$v.",symbolSize:".$size."}";
											$w++;
										}
										echo implode(',',$newout2);
				                	</php>
				                   ]
				            }
				        },
				        {
				            name:'即时利润',
				            type:'line',
				            data:[<php>echo implode(",",$alllinedataarr['newlirun']);</php>],
				            markPoint : {
				                data : [
				                	<php>
				                		$w=0;
										foreach($alllinedataarr['newlirun'] as $v){
											if($v=='')$v=0;
											$size=(strlen($v)+1)*3;
											$newlirun2[]="{value:".$v.",xAxis:".$w.",yAxis:".$v.",symbolSize:".$size."}";
											$w++;
										}
										echo implode(',',$newlirun2);
				                	</php>
				                   ]
				            }
				        },
				        {
				            name:'即时收入',
				            type:'line',
				            data:[<php>echo implode(",",$alllinedataarr['newin']);</php>],
				            markPoint : {
				                data : [
				                	<php>
				                		$w=0;
										foreach($alllinedataarr['newin'] as $v){
											if($v=='')$v=0;
											$size=(strlen($v)+1)*3;
											$newin2[]="{value:".$v.",xAxis:".$w.",yAxis:".$v.",symbolSize:".$size."}";
											$w++;
										}
										echo implode(',',$newin2);
				                	</php>
				                   ]
				            }
				        }

				    ]
				};
		        // 为echarts对象加载数据 
		        myChart1.setOption(option2);

			});
		</script>
	</head>
	<body>			
		<!--统计缩略图-->
		<div class="statisticsThumbnail" style="top: 0px; left: 0px!important;width:100%;">
			<form id='dataform' action="" method='get'>
			<div class="statisticsFiltrate fl tc w">
			
				<span style="width:200px;display:inline-block;">
				<select name='lineid[]' class="selectpicker" multiple data-done-button="true" data-live-search="true">
					<option value='0'>全公司</option>
					<foreach name='linelist' item='v' key='k'>
					<option <php>if(in_array($v['id'],I('get.lineid')))echo "selected='selected'";</php> value="{$v.id}">{$v.name}</option>
					</foreach>
				</select>
				</span>
				<span class="screenCn">
				<input type='submit'/>
				</span>
			</div>
			</form>

			<div id="myChart1" class="fl" style=" margin: 2%; width: 90%; height: 80%; "></div>

		</div>
			
		

	
	</body>

</html>